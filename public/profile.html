<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>User Dashboard</title>
  
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  
  <!-- FontAwesome Icons -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  
  <!-- Custom CSS -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="./css/style.css" />

  <style>
    body{
    font-family: 'Inter', sans-serif;
    }
    .arrow1{
      rotate: 245deg;
      top: -30px;
      right: 120px;
    }
    .arrow2{
      rotate: 310deg;
      bottom: -50px;
      right: 20px;
    }
    .arrow3{
      rotate: 310deg;
    }#sidebar .nav-link {
    position: relative;
    display: inline-block;
  }

  /* Tooltip styling */
  #sidebar .nav-link::after {
    content: attr(data-tooltip); /* take tooltip text from attribute */
    position: absolute;
    left: 60px; /* adjust distance from icon */
    top: 50%;
    transform: translateY(-50%);
    background: #fff;
    color: #000;
    padding: 4px 10px;
    border-radius: 6px;
    white-space: nowrap;
    font-size: 14px;
    font-weight: 500;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s ease, left 0.2s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
  }

  /* Show tooltip on hover */
  #sidebar .nav-link:hover::after {
    opacity: 1;
    left: 50px; /* moves closer on hover for nice effect */
  }
  .nav-link:hover{
    color: white !important;
  }
  </style>
</head>
<body>

<div class="d-flex" id="wrapper">

  <!-- Sidebar -->
  <div class="bg-dark text-white py-4 sidebar" id="sidebar">
    <div class="text-center mb-4 mt-1 pe-2">
      <img src="./images/HI01FG5KkiWkx9iG6fa2VBQVQM.png" alt="" class="img-fluid">
    </div>
    <nav class="nav flex-column ps-3">
      <!-- Sidebar Links -->
      <a href="./index.html" class="nav-link text-white-50 fs-5 mb-2 mt-4" data-tooltip="Home">
        <i class="fas fa-home"></i>
      </a>
      <a href="./user-dashboard.html" class="nav-link text-white-50 fs-5 mb-2" data-tooltip="Dashboard">
        <i class="fas fa-circle-user"></i>
      </a>
      <a href="./statement.html" class="nav-link text-white-50 fs-5 mb-2" data-tooltip="Statement">
        <i class="fas fa-chart-line"></i>
      </a>
      <a href="./dom.html" class="nav-link text-white-50 fs-5 mb-2" data-tooltip="Transfer History">
        <i class="fas fa-clipboard-check"></i>
      </a>
      <a href="./domestic-transfer.html" class="nav-link text-white-50 fs-5 mb-2" data-tooltip="Domestic Transfer">
        <i class="fas fa-exchange-alt"></i>
      </a>
      <a href="./interbank-transfer.html" class="nav-link text-white-50 fs-5 mb-2" data-tooltip="Interbank Transfer">
        <i class="fas fa-money-bill-transfer"></i>
      </a>
      <a href="./wire-transfer.html" class="nav-link text-white-50 fs-5 mb-2" data-tooltip="Wire Transfer">
        <i class="fas fa-hand-holding-dollar"></i>
      </a>
      <a onclick="logout()" class="nav-link text-white-50 fs-5 mb-2" data-tooltip="Logout">
        <i class="fas fa-door-open"></i>
      </a>
      <a href="./profile.html" class="nav-link text-white-50 fs-5 mt-5" data-tooltip="Profile">
        <img src="" alt="" class="rounded-circle" width="30" height="30" alt="Profile" id="profilePic3">
      </a>
    </nav>
  </div>

  <!-- Page Content -->
  <div id="page-content-wrapper" class="col-11 ml-6">

     <!-- Navbar -->
     <nav class="navbar bg-white shadow-sm p-3">
      <div class="container d-flex justify-content-between align-items-center">
        
        <!-- Left: Logo -->
        <a class="navbar-brand fw-bold fs-4" href="./index.html"><img src="./images/HI01FG5KkiWkx9iG6fa2VBQVQM.png" alt="logo"/> Neobankia<span style="color: #4635C4">.</span></a>

        <!-- Center: Navigation Links -->
        <div class="d-flex justify-content-end align-items-center d-none d-lg-block">
          <span class="me-3 fw-bold" id="name1">User</span>
          <img src="" class="rounded-circle" width="40" height="40" alt="Profile" id="profilePic2">
        </div>

        <!-- Toggle for Mobile -->
        <button class="navbar-toggler d-lg-none" type="button" data-bs-toggle="collapse" data-bs-target="#mobileMenu">
          <span class="navbar-toggler-icon"></span>
        </button>
      </div>

      <!-- Mobile Menu -->
      <div class="collapse navbar-collapse d-lg-none bg-dark px-4" id="mobileMenu">
        <ul class="navbar-nav">
          <a href="./index.html" class="nav-link text-white-50 fs-5 mb-2 mt-4">
            <i class="fas fa-home me-2"></i> <span>Go To Home</span>
          </a>
          <a href="./user-dashboard.html" class="nav-link text-white fs-5 mb-2">
            <i class="fas fa-circle-user me-2"></i> <span>Dashboard Overview</span>
          </a>
          <a href="./statement.html" class="nav-link text-white-50 fs-5 mb-2">
            <i class="fas fa-chart-line me-2"></i> <span>Bank Statement</span>
          </a>
          <a href="./dom.html" class="nav-link text-white-50 fs-5 mb-2">
            <i class="fas fa-clipboard-check me-2"></i> <span>Transfer History</span>
          </a>
          <a href="./domestic-transfer.html" class="nav-link text-white-50 fs-5 mb-2">
            <i class="fas fa-exchange-alt me-2"></i> <span>Domestic Transfer</span>
          </a>
          <a href="./interbank-transfer.html" class="nav-link text-white-50 fs-5 mb-2">
            <i class="fas fa-money-bill-transfer me-2"></i> <span>Interbank Transfer</span>
          </a>
          <a href="./wire-transfer.html" class="nav-link text-white-50 fs-5 mb-2">
            <i class="fas fa-hand-holding-dollar me-2"></i> <span>Wire Transfer</span>
          </a>
          <a onclick="logout()" class="nav-link text-white-50 fs-5 mb-2">
            <i class="fas fa-door-open me-2"></i> <span>Logout</span>
          </a>
        </ul>
      </div>
    </nav>
    

    <div class="container mt-5">
        <div class="banner my-3 rounded container-fluid text-center">
            <div class="d-flex justify-content-between p-4 detail-bg2 position-relative overflow-hidden">
              <div class="col-4 text-center mx-auto">
                <img id="profilePicture" src="" class="rounded-circle mb-3" width="120" height="120" alt="Profile Picture" />
                <h3 id="fullName"></h3>
                <p id="username" class="text-muted"></p>
              </div>
                <img src="./images/arrow-purple.svg" alt="" class="img-fluid col-1 mb-3 position-absolute arrow1">
                <img src="./images/arrow-purple.svg" alt="" class="img-fluid col-1 mb-3 position-absolute arrow2">
                <img src="./images/arrow-purple.svg" alt="" class="img-fluid col-1 mb-3 position-absolute arrow3">
              
            </div>
          </div>
            
        </div>
    
        <hr />
    
        <div class="row container-fluid mt-5 px-2 gap-3 justify-content-center">
            <div class="border col-md-6 mb-2 detail-bg2 py-3 d-flex align-items-center">
                <strong class="me-3">Email:</strong> <span class="fs-5" id="email"></span> 
            </div>
            <div class="border col-md-6 mb-2 detail-bg2 py-3 d-flex align-items-center">
                <strong class="me-3">Account Number:</strong> <span class="fs-5" id="accountNumber"></span> 
            </div>
            <div class="border col-md-6 mb-2 detail-bg2 py-3 d-flex align-items-center">
                <strong class="me-3">Phone:</strong> <span class="fs-5" id="phone"></span> 
            </div>
            <div class="border col-md-6 mb-2 detail-bg2 py-3 d-flex align-items-center">
                <strong class="me-3">Date of Birth:</strong> <span class="fs-5" id="dob"></span>
            </div>
            <div class="border col-md-6 mb-2 detail-bg2 py-3 d-flex align-items-center">
                <strong class="me-3">Gender:</strong> <span class="fs-5" id="gender"></span>
            </div>
            <div class="border col-md-6 mb-4 detail-bg2 py-3 d-flex align-items-center">
                <strong class="me-3">Marital Status:</strong> <span class="fs-5" id="maritalStatus"></span>
            </div>
            
            <hr />

            <div class="border col-md-6 mt-3 mb-2 detail-bg2 py-3 d-flex align-items-center">
                <strong class="me-3">Address:</strong> <span class="fs-5" id="address"></span>
            </div>
            <div class="border col-md-6 mb-2 detail-bg2 py-3 d-flex align-items-center">
                <strong class="me-3">Country:</strong> <span class="fs-5" id="country"></span>
            </div>
            <div class="border col-md-6 mb-2 detail-bg2 py-3 d-flex align-items-center">
                <strong class="me-3">Zip Code:</strong> <span class="fs-5" id="zipCode"></span>
            </div>
        </div>
        </div>
    </div>
  
</div>
<!-- FOOTER  -->
<footer class="bg-dark text-white mt-5 pt-5 pb-2"style="background-image: url(./images/world-dotted-map.png); background-position: center; background-size: 60%; background-repeat: no-repeat;">
  <div class="container">
    <div class="row gy-4 justify-content-between py-5">

      <!-- Company Branding -->
    <div class="col-lg-3">
      <h4 class="fw-bold text-uppercase">Neobankia</h4>
      <p class="text-white-50 mt-2">Revolutionizing finance with simple, smart, and secure banking for everyone.</p>
      <div class="d-flex gap-3 mt-3">
        <span class="text-white fs-5"><i class="bi bi-facebook"></i></span>
        <span class="text-white fs-5"><i class="bi bi-linkedin"></i></span>
        <span class="text-white fs-5"><i class="bi bi-instagram"></i></span>
      </div>
    </div>

    <!-- Quick Navigation -->
    <div class="col-lg-2 col-md-6">
      <h6 class="text-uppercase fw-semibold">Company</h6>
      <ul class="list-unstyled mt-3">
        <li><a href="./index.html" class="text-white-50 text-decoration-none d-block mb-2">Home</a></li>
        <li><a href="./about.html" class="text-white-50 text-decoration-none d-block mb-2">About Us</a></li>
        <li><a href="./features.html" class="text-white-50 text-decoration-none d-block mb-2">Features</a></li>
        <li><a href="./reviews.html" class="text-white-50 text-decoration-none d-block mb-2">Our Reviews</a></li>
        <li><a href="./contact.html" class="text-white-50 text-decoration-none d-block">Contact Us</a></li>
      </ul>
    </div>

    <!-- Resources -->
    <div class="col-lg-3 col-md-6">
      <h6 class="text-uppercase fw-semibold">User Dashboard</h6>
      <ul class="list-unstyled mt-3">
        <li><a href="./user-dashboard.html" class="text-white-50 text-decoration-none d-block mb-2">Overview</a></li>
        <li><a href="./statement.html" class="text-white-50 text-decoration-none d-block mb-2">Bank Statement</a></li>
        <li><a href="./interbank-transfer.html" class="text-white-50 text-decoration-none d-block mb-2">Inter-BankTransfer</a></li>
        <li><a href="./domestic-transfer.html" class="text-white-50 text-decoration-none d-block mb-2">Domestic Transfer</a></li>
        <li><a href="./wire-transfer.html" class="text-white-50 text-decoration-none d-block">Wire Transfer</a></li>
      </ul>
    </div>

      <!-- Contact Info -->
      <div class="col-lg-3">
        <h6 class="text-uppercase fw-semibold">Contact</h6>
        <ul class="list-unstyled mt-3 text-white-50">
          <li><i class="bi bi-envelope-fill me-2"></i>support@neobankia.com</li>
          <li class="mt-2"><i class="bi bi-telephone-fill me-2"></i>+17828213111</li>
          <li class="mt-2"><i class="bi bi-geo-alt-fill me-2"></i>Calagary, Alberta city, Canada</li>
        </ul>
      </div>

    </div>

    <!-- Bottom Bar -->
    <div class="text-center border-top border-secondary mt-2 py-4">
      <small class="text-white-50">&copy; 2025 Neobankia. All rights reserved.</small>
    </div>
  </div>
</footer>
</div>
<script>
//     document.addEventListener("DOMContentLoaded", () => {
//   const username = "sampleUser"; // You can dynamically get this (e.g. from login session)

//   fetch(`/api/user/${username}`)
//     .then(res => res.json())
//     .then(user => {
//       if (user) {
//         document.getElementById("profilePicture").src = user.profilePicture || "default.png";
//         document.getElementById("fullName").textContent = user.fullName;
//         document.getElementById("username").textContent = `@${user.username}`;
//         document.getElementById("email").textContent = user.email;
//         document.getElementById("accountNumber").textContent = user.accountNumber;
//         document.getElementById("phone").textContent = user.phoneNumber;
//         document.getElementById("dob").textContent = user.dateOfBirth || "-";
//         document.getElementById("gender").textContent = user.gender || "-";
//         document.getElementById("maritalStatus").textContent = user.maritalStatus || "-";
//         document.getElementById("address").textContent = user.address || "-";
//         document.getElementById("country").textContent = user.countryOfOrigin || "-";
//         document.getElementById("zipCode").textContent = user.zipCode || "-";
//       }
//     })
//     .catch(err => console.error("Error loading profile:", err));
// });

</script>
<script>
    function logout() {
    localStorage.removeItem('token');
    window.location.href = '/user-login.html';
  }



    document.addEventListener("DOMContentLoaded", () => {
      const token = localStorage.getItem("token");
      if (!token) {
        window.location.href = "/user-login.html";
        return;
      }
    
      fetch("/api/user/profile", {
        headers: {
          "Authorization": `Bearer ${token}`
        }
      })
      .then(res => {
        if (res.status === 401) {
          localStorage.removeItem("token");
          window.location.href = "/login.html";
          return;
        }
        return res.json();
      })
      .then(user => {
        if (user) {
          // Profile picture
          if (user.profilePicture) {
            const profilePic = document.getElementById("profilePicture");
            if (profilePic) profilePic.src = user.profilePicture;
          }
    
          // Names
          document.getElementById("name1").textContent = user.fullName || "";
          document.getElementById("fullName").textContent = user.fullName || "";
          // Other details
          if (document.getElementById("username")) document.getElementById("username").textContent = user.username || "";
          if (document.getElementById("email")) document.getElementById("email").textContent = user.email || "";
          if (document.getElementById("email")) document.getElementById("email").textContent = user.email || "";
          if (document.getElementById("accountNumber")) document.getElementById("accountNumber").textContent = user.accountNumber || "";
          if (document.getElementById("phone")) document.getElementById("phone").textContent = user.phoneNumber || "";
          if (document.getElementById("gender")) document.getElementById("gender").textContent = user.gender || "";
          if (document.getElementById("dob")) document.getElementById("dob").textContent = user.dateOfBirth || "";
          if (document.getElementById("address")) document.getElementById("address").textContent = user.address || "";
          if (document.getElementById("maritalStatus")) document.getElementById("maritalStatus").textContent = user.maritalStatus || "";
          if (document.getElementById("country")) document.getElementById("country").textContent = user.countryOfOrigin || "";
          if (document.getElementById("zipCode")) document.getElementById("zipCode").textContent = user.zipCode || "";
        }
      })
      .catch(err => console.error("Error fetching profile:", err));
    });

    app.get("/api/user/profile", async (req, res) => {
  try {
    const users = await User.find();

    const formattedUsers = users.map(user => {
      let dobFormatted = null;

      if (user.dob) {
        const dateObj = new Date(user.dob);
        const day = String(dateObj.getDate()).padStart(2, "0");
        const month = String(dateObj.getMonth() + 1).padStart(2, "0");
        const year = dateObj.getFullYear();
        dobFormatted = `${day}-${month}-${year}`;
      }

      return {
        ...user.toObject(),
        dob: dobFormatted, // Only format DOB
      };
    });

    res.json(formattedUsers);
  } catch (error) {
    console.error(error);
    res.status(500).json({ message: "Server error" });
  }
});

    </script>
x    
</body>